<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Final - Ícono del Carrito y Funcionalidad</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/homepage.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
        }
        .test-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid var(--card-border);
            background: var(--card-bg);
        }
        .product-card {
            border: 1px solid var(--card-border);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
            background: var(--card-bg);
        }
        .product-image {
            width: 100px;
            height: 100px;
            background: var(--card-bg);
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }
        .product-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        .status-display {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
        }
        .debug-info {
            font-family: monospace;
            font-size: 0.8rem;
            background: var(--bg-color);
            padding: 0.5rem;
            border-radius: 0.25rem;
            margin: 0.5rem 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Test Final - Ícono del Carrito y Funcionalidad</h1>
        
        <!-- Theme Toggle -->
        <div class="mb-4">
            <button id="themeToggle" class="btn btn-primary">
                <i class="fas fa-moon"></i> Toggle Dark Mode
            </button>
            <span id="currentTheme" class="ms-3 badge bg-secondary">Light Mode</span>
        </div>

        <!-- Test Section 1: Cart Icon Color -->
        <div class="test-section">
            <h3>1. Test del Color del Ícono del Carrito</h3>
            <p>Verifica que el ícono del carrito sea visible en ambos modos:</p>
            
            <div class="product-card">
                <div class="product-image">
                    <i class="fas fa-laptop" style="font-size: 2rem; color: var(--text-color);"></i>
                </div>
                <h5>DELL OptiPlex 3070</h5>
                <p>Desktop computer with excellent performance</p>
                <div class="product-price">
                    <span class="current-price">B/. 239.99</span>
                    <span class="original-price">B/. 399.99</span>
                </div>
                <div class="product-actions">
                    <a href="#" class="btn btn-primary flex-grow-1">View Details</a>
                    <button class="btn btn-light add-to-cart-btn" onclick="testAddToCart('dell-3070')">
                        <i class="fas fa-shopping-cart"></i>
                    </button>
                </div>
            </div>
            
            <div class="status-display">
                <h6>Estado del Ícono:</h6>
                <div id="iconStatus">Verificando...</div>
            </div>
        </div>

        <!-- Test Section 2: Cart Functionality -->
        <div class="test-section">
            <h3>2. Test de Funcionalidad del Carrito</h3>
            <p>Verifica que el botón abra el sidebar del carrito:</p>
            
            <div class="product-card">
                <div class="product-image">
                    <i class="fas fa-mobile-alt" style="font-size: 2rem; color: var(--text-color);"></i>
                </div>
                <h5>iPhone 13 128GB</h5>
                <p>Premium smartphone with excellent performance</p>
                <div class="product-price">
                    <span class="current-price">B/. 599.99</span>
                    <span class="original-price">B/. 899.99</span>
                </div>
                <div class="product-actions">
                    <a href="#" class="btn btn-primary flex-grow-1">View Details</a>
                    <button class="btn btn-light add-to-cart-btn" onclick="testAddToCart('iphone-13')">
                        <i class="fas fa-shopping-cart"></i>
                    </button>
                </div>
            </div>
            
            <div class="status-display">
                <h6>Estado de la Función:</h6>
                <div id="functionStatus">Esperando clic...</div>
            </div>
        </div>

        <!-- Test Section 3: Multiple Products -->
        <div class="test-section">
            <h3>3. Test con Múltiples Productos</h3>
            <p>Prueba agregar diferentes productos al carrito:</p>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="product-card">
                        <h6>iPad Pro 11"</h6>
                        <p>B/. 699.99</p>
                        <button class="btn btn-light add-to-cart-btn" onclick="testAddToCart('ipad-pro-11')">
                            <i class="fas fa-shopping-cart"></i>
                        </button>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="product-card">
                        <h6>Galaxy S21 5G</h6>
                        <p>B/. 399.99</p>
                        <button class="btn btn-light add-to-cart-btn" onclick="testAddToCart('galaxy-s21')">
                            <i class="fas fa-shopping-cart"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Test Section 4: Debug Information -->
        <div class="test-section">
            <h3>4. Información de Debug</h3>
            <div class="debug-info">
                <div><strong>CSS Variables:</strong></div>
                <div id="cssVariables"></div>
            </div>
            <div class="debug-info">
                <div><strong>Computed Styles:</strong></div>
                <div id="computedStyles"></div>
            </div>
        </div>
    </div>

    <script src="js/dark-mode-manager.js"></script>
    <script>
        // Initialize dark mode manager
        document.addEventListener('DOMContentLoaded', function() {
            if (window.darkModeManager) {
                window.darkModeManager.init();
            }
            
            // Theme toggle functionality
            const themeToggle = document.getElementById('themeToggle');
            const currentTheme = document.getElementById('currentTheme');
            
            themeToggle.addEventListener('click', function() {
                if (window.darkModeManager) {
                    window.darkModeManager.toggleTheme();
                    updateThemeDisplay();
                    updateDebugInfo();
                }
            });
            
            function updateThemeDisplay() {
                const isDark = document.body.classList.contains('dark-mode') || 
                               document.documentElement.getAttribute('data-theme') === 'dark';
                currentTheme.textContent = isDark ? 'Dark Mode' : 'Light Mode';
                currentTheme.className = isDark ? 'ms-3 badge bg-dark' : 'ms-3 badge bg-secondary';
            }
            
            function updateDebugInfo() {
                // Update CSS variables
                const cssVariables = document.getElementById('cssVariables');
                const computedStyle = getComputedStyle(document.documentElement);
                
                const variables = [
                    '--primary-color',
                    '--text-color',
                    '--text-inverse',
                    '--card-bg',
                    '--bg-color'
                ];
                
                let html = '';
                variables.forEach(varName => {
                    const value = computedStyle.getPropertyValue(varName);
                    html += `<div>${varName}: ${value}</div>`;
                });
                
                cssVariables.innerHTML = html;
                
                // Update computed styles for cart icon
                const cartIcon = document.querySelector('.add-to-cart-btn .fas.fa-shopping-cart');
                const computedStyles = document.getElementById('computedStyles');
                
                if (cartIcon) {
                    const iconStyle = getComputedStyle(cartIcon);
                    const color = iconStyle.color;
                    const backgroundColor = iconStyle.backgroundColor;
                    
                    computedStyles.innerHTML = `
                        <div>Icon Color: ${color}</div>
                        <div>Icon Background: ${backgroundColor}</div>
                        <div>Icon Display: ${iconStyle.display}</div>
                        <div>Icon Visibility: ${iconStyle.visibility}</div>
                    `;
                }
            }
            
            // Test cart functionality
            window.testAddToCart = function(productId) {
                const functionStatus = document.getElementById('functionStatus');
                const iconStatus = document.getElementById('iconStatus');
                
                // Check if header component exists
                const header = document.querySelector('recomputech-header');
                if (header) {
                    functionStatus.innerHTML = `
                        <span class="text-success">✓ Header component found</span><br>
                        <span class="text-info">Product ID: ${productId}</span><br>
                        <span class="text-warning">⚠️ Nota: En un entorno real, esto abriría el sidebar del carrito</span>
                    `;
                } else {
                    functionStatus.innerHTML = `
                        <span class="text-danger">✗ Header component not found</span><br>
                        <span class="text-info">Product ID: ${productId}</span>
                    `;
                }
                
                // Check icon visibility
                const cartIcon = document.querySelector('.add-to-cart-btn .fas.fa-shopping-cart');
                if (cartIcon) {
                    const iconStyle = getComputedStyle(cartIcon);
                    const color = iconStyle.color;
                    const isVisible = color !== 'rgba(0, 0, 0, 0)' && color !== 'transparent';
                    
                    iconStatus.innerHTML = `
                        <span class="${isVisible ? 'text-success' : 'text-danger'}">
                            ${isVisible ? '✓' : '✗'} Icono visible
                        </span><br>
                        <span class="text-info">Color: ${color}</span>
                    `;
                } else {
                    iconStatus.innerHTML = '<span class="text-danger">✗ Icono no encontrado</span>';
                }
                
                updateDebugInfo();
            };
            
            // Initial updates
            updateThemeDisplay();
            updateDebugInfo();
            
            // Listen for theme changes
            document.addEventListener('themeChanged', function() {
                updateThemeDisplay();
                updateDebugInfo();
            });
        });
    </script>
</body>
</html>
